{"version":3,"sources":["webpack:///webpack/bootstrap 92348216a100694f9356","webpack:///external \"lodash\"","webpack:///external \"fs-extra\"","webpack:///./src/base.js","webpack:///external \"path\"","webpack:///./src/index.js","webpack:///./src/init.js","webpack:///external \"node-status\"","webpack:///external \"ini\"","webpack:///./src/list.js","webpack:///external \"tty-table\"","webpack:///./src/create.js","webpack:///external \"inquirer\"","webpack:///external \"runscript\"","webpack:///external \"ora\""],"names":["HOMEPATH","process","env","HOME","SSH_PATH","resolve","KSSH_PATH","SSH_CONFILE","KSSH_CONFILE","SSH_CONFHEAD","KSSH_CONFHEAD","tableStyle","borderStyle","paddingBottom","headerAlign","align","color","truncate","getSSHConfig","existsSync","confStr","readFileSync","confArr","split","confData","item","info","getSSHInfo","push","data","test","arr","map","i","replace","SSH_CONF","getGitCommit","gitConfigFile","gitConfig","commitStr","parse","user","has","name","email","join","gitCommit","getKSSHConfig","KSSH_CONF","saveSSHConf","config","infoData","e","Host","HostName","User","Port","IdentityFile","writeFileSync","default","taskList","message","doTask","mkdirpSync","task","addItem","steps","o","length","console","log","start","pattern","doTaskWork","doneTask","index","count","doneStep","error","stop","setTimeout","bodyHeader","value","width","paddingLeft","type","list","filter","bodyer","toBodyer","t3","render","exit","dataList","options","current","inquirerByName","then","findIndex","ret","inquirerByHost","bash","commit","keyFile","spinner","newSSH","host","port","RegExp","newSSHConf","successTag","catch","prompt","validate","validName","opts","repository","validHost","validPort","validUser","isEmpty","val","Number","isInteger"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 92348216a100694f9356","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 1\n// module chunks = 0","\nimport path from 'path'\nimport fs from 'fs-extra'\nimport ini from 'ini'\nimport _ from 'lodash'\n\n\nexport const HOMEPATH = process.env.HOME || process.env.HOMEPATH\nexport const SSH_PATH = path.resolve(HOMEPATH, '.ssh')\nexport const KSSH_PATH = path.resolve(HOMEPATH, '.kssh')\nexport const SSH_CONFILE = path.resolve(SSH_PATH, 'config')\nexport const KSSH_CONFILE = path.resolve(KSSH_PATH, 'config')\nexport const SSH_CONFHEAD = `# SSH Configure\\n`\nexport const KSSH_CONFHEAD = `; KSSH Configure\\n`\n\nexport const tableStyle = {\n  borderStyle : 2,\n  paddingBottom : 0,\n  headerAlign : \"center\",\n  align : \"center\",\n  color : \"white\",\n  truncate: \"...\"\n}\n\nconst getSSHConfig = () => {\n  if (!fs.existsSync(SSH_CONFILE)) {\n    return []\n  }\n  let confStr = fs.readFileSync(SSH_CONFILE, 'utf-8')\n  let confArr = confStr.split(/(Host)[\\s+]/)\n  let confData = []\n  for (let item of confArr) {\n    let info = getSSHInfo(item)\n    info && confData.push(info)\n  }\n  return confData\n}\n\nconst getSSHInfo = (data) => {\n  let info = null\n  if (/HostName/.test(data)) {\n    info = {}\n    let arr = data.split(/\\n/)\n    arr.map( (item, i) => {\n      if (/Host(?=\\s)/.test(item)) {\n        info['Host'] = item.replace(/Host(?=\\s)/, '').replace(/(\\s|\\r)/g, '')\n      }\n      else if (i === 0) {\n        info['Host'] = item.replace(/(\\s|\\r)/g, '')\n      }\n      if (/HostName(?=\\s)/.test(item)) {\n        info['HostName'] = item.replace(/HostName(?=\\s)/, '').replace(/\\s/g, '')\n      }\n      if (/User(?=\\s)/.test(item)) {\n        info['User'] = item.replace(/User(?=\\s)/, '').replace(/\\s/g, '')\n      }\n      if (/Port/.test(item)) {\n        info['Port'] = item.replace(/Port(?=\\s)/, '').replace(/\\s/g, '')\n      }\n      if (/IdentityFile(?=\\s)/.test(item)) {\n        info['IdentityFile'] = item.replace(/IdentityFile(?=\\s)/, '').replace(/\\s/g, '')\n      }\n    })\n  }\n  return info\n}\n\nexport const SSH_CONF = getSSHConfig()\n\nconst getGitCommit = () => {\n  let gitConfigFile = path.resolve(HOMEPATH, '.gitconfig')\n  let gitConfig = {}\n  let commitStr = null\n  if (fs.existsSync(gitConfigFile)) {\n    gitConfig = ini.parse(fs.readFileSync(gitConfigFile, 'utf-8'))\n    if (gitConfig.user) {\n      commitStr = []\n      _.has(gitConfig.user, 'name') && commitStr.push(gitConfig.user.name)\n      _.has(gitConfig.user, 'email') && commitStr.push(`<${gitConfig.user.email}>`)\n      return _.join(commitStr, ' ')\n    }\n  }\n  return commitStr\n}\n\nexport const gitCommit = getGitCommit()\n\nconst getKSSHConfig = () => {\n  if (!fs.existsSync(KSSH_CONFILE)) {\n    return null\n  }\n  let confStr = fs.readFileSync(KSSH_CONFILE, 'utf-8')\n  return ini.parse(confStr)\n}\n\nexport const KSSH_CONF = getKSSHConfig()\n\nexport const saveSSHConf = (config) => {\n  let infoData = SSH_CONFHEAD\n  for (let e of config) {\n    infoData += `\\n`\n    infoData += `#${e.Host}\\n`\n    infoData += `Host ${e.Host}\\n`\n    infoData += `    HostName ${e.HostName}\\n`\n    infoData += `    User ${e.User}\\n`\n    if (e.Port) {\n      infoData += `    Port ${e.Port}\\n`\n    }\n    infoData += `    IdentityFile ${e.IdentityFile}\\n`\n  }\n  fs.writeFileSync(SSH_CONFILE, infoData, 'utf-8')\n}\n\n\n// WEBPACK FOOTER //\n// ./src/base.js","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","export { default as init } from './init'\nexport { default as list } from './list'\nexport { default as create } from './create'\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\nimport fs from 'fs-extra'\nimport status from 'node-status'\nimport _ from 'lodash'\nimport { SSH_PATH, SSH_CONFILE, SSH_CONFHEAD, KSSH_PATH, KSSH_CONFILE, KSSH_CONFHEAD } from './base'\n\nconst taskList = [\n  {\n    message: 'Check the system ssh directory',\n    doTask: () => !fs.existsSync(SSH_PATH) && fs.mkdirpSync(SSH_PATH)\n  },\n  {\n    message: 'Check the system ssh configuration file',\n    doTask: () => !fs.existsSync(SSH_CONFILE) && fs.writeFileSync(SSH_CONFILE, SSH_CONFHEAD, 'utf-8')\n  },\n  {\n    message: 'Check the system kssh directory',\n    doTask: () => !fs.existsSync(KSSH_PATH) && fs.mkdirpSync(KSSH_PATH)\n  },\n  {\n    message: 'Check the system kssh configuration file',\n    doTask: () => !fs.existsSync(KSSH_CONFILE) && fs.writeFileSync(KSSH_CONFILE, KSSH_CONFHEAD, 'utf-8')\n  }\n]\nconst task = status.addItem('task', {\n  steps: _.map(taskList, (o, i) => `[${i+1}/${taskList.length}] ${o.message}`)\n})\n\nexport default () => {\n  console.log(`\\n  Starting Initial tasks ...\\n`)\n  status.start({ pattern: '{spinner.cyan} {task.step}' })\n  doTaskWork()\n}\n\nconst doneTask = () => {\n  let index = task.count\n  try {\n    taskList[index].doTask()\n    task.doneStep(1)\n  } catch (error) {\n    task.doneStep(0, error)\n  }\n  if (task.count >= task.steps.length) {\n    status.stop()\n    return console.log(`\\n  All Initial tasks completed!\\n`)\n  }\n  doTaskWork()\n}\n\nconst doTaskWork = () => setTimeout(doneTask, 500)\n\n\n// WEBPACK FOOTER //\n// ./src/init.js","module.exports = require(\"node-status\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-status\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"ini\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ini\"\n// module id = 7\n// module chunks = 0","\nimport Table from 'tty-table'\nimport _ from 'lodash'\nimport { tableStyle, SSH_CONF } from './base'\n\nconst bodyHeader = [\n  {\n    value: 'Name',\n    align: 'center',\n    width: 20,\n    paddingLeft: 2\n  },\n  {\n    value: 'Host',\n    align: 'left',\n    width: 30,\n    paddingLeft: 2\n  },\n  {\n    value: 'Port',\n    align: 'center',\n    width: 10,\n    paddingLeft: 2\n  },\n  {\n    value: 'User',\n    align: 'center',\n    width: 15,\n    paddingLeft: 2\n  },\n  {\n    value: 'IdentityFile',\n    align: 'left',\n    width: 40,\n    paddingLeft: 2\n  }\n]\n\nexport default (type = 'all') => {\n  let list = SSH_CONF\n  if (/^(git|other)$/.test(type)) {\n    list = _.filter(list, o => /^(git)$/.test(type) ? o.User === 'git' : o.User !== 'git')\n  }\n  let bodyer = toBodyer(list)\n  let t3 = Table(bodyHeader, bodyer, tableStyle)\n  console.log(t3.render(), '\\n')\n  process.exit(0)\n}\n\nconst toBodyer = (data) => {\n  let dataList = []\n  for (let item of data) {\n    dataList.push([\n      item.Host || '--',\n      item.HostName || '--',\n      item.Port || '--',\n      item.User || '--',\n      item.IdentityFile  || '--'\n    ])\n  }\n  return dataList\n}\n\n\n// WEBPACK FOOTER //\n// ./src/list.js","module.exports = require(\"tty-table\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"tty-table\"\n// module id = 9\n// module chunks = 0","\nimport path from 'path'\nimport fs from 'fs-extra'\nimport inquirer from 'inquirer'\nimport runscript from 'runscript'\nimport ora from 'ora'\nimport _ from 'lodash'\nimport { SSH_PATH, SSH_CONF, SSH_CONFILE, KSSH_CONF, gitCommit, saveSSHConf, HOMEPATH } from './base'\n\nexport default (type) => {\n  let options = null\n  let current = null\n  return inquirerByName()\n  .then( ret => {\n    current = _.findIndex(SSH_CONF, o => o.Host == ret.name)\n    return inquirerByHost(ret, type)\n  })\n  .then( ret => {\n    options = ret\n    let bash = [`ssh-keygen -t rsa`]\n    ret.commit && bash.push(`-C \"${ret.commit}\"`)\n    let keyFile = path.resolve(SSH_PATH, ret.name)\n    bash.push(`-f ${keyFile}`)\n    return runscript(_.join(bash, ' '))\n  })\n  .then( () => {\n    console.log('')\n    let spinner = ora('    Create SSH key ...').start()\n    let newSSH = {\n      Host: options.name,\n      HostName: options.host,\n      User: options.user,\n      ...options.port !== 22 ? { Port: options.port } : null,\n      IdentityFile: path.resolve(SSH_PATH, options.name).replace(new RegExp(`^(${HOMEPATH})`), '~')\n    }\n    let newSSHConf = SSH_CONF\n    let successTag = 'create'\n    if (current > -1) {\n      newSSHConf[current] = newSSH\n      successTag = 'update'\n    }\n    else {\n      newSSHConf.push(newSSH)\n    }\n    saveSSHConf(newSSHConf)\n    setTimeout(() => {\n      spinner.stop()\n      console.log(`\\n✔    ${successTag} [${options.name}] SSH key successfully!\\n`)\n    }, 500)\n  })\n  .catch( error => {\n    process.exit(0)\n  })\n}\n\nconst inquirerByName = () => {\n  return inquirer.prompt([\n    {\n      type: 'input',\n      name: 'name',\n      message: 'Name ?',\n      validate: validName\n    }\n  ])\n}\n\nconst inquirerByHost = (opts, type) => {\n  let repository = KSSH_CONF['repository'][type]\n  return inquirer.prompt([\n    {\n      type: 'input',\n      name: 'host',\n      message: 'Input Host Name Or IP Address: ',\n      ..._.has(repository, 'host') ? { default: repository.host } : null,\n      validate: validHost\n    },\n    {\n      type: 'input',\n      name: 'port',\n      message: 'Input Host Port: (0-99999)',\n      default: 22,\n      validate: validPort\n    },\n    {\n      type: 'input',\n      name: 'user',\n      message: 'Input Host User: ',\n      ..._.has(repository, 'user') ? { default: repository.user } : null,\n      validate: validUser\n    },\n    {\n      type: 'input',\n      name: 'commit',\n      message: 'Input Commit: ',\n      ...gitCommit ? { default: gitCommit } : null\n    }\n  ])\n  .then( ret => ({ ...opts, ...ret }) )\n}\n\nconst validName = (value) => {\n  if (_.isEmpty(value.replace(/\\s+/, ''))) {\n    return 'Name is required！'\n  }\n  if (value === 'config') {\n    return 'Name can not be \\'config\\' !'\n  }\n  return true\n}\n\nconst validHost = (value) => {\n  if (_.isEmpty(value.replace(/\\s+/, ''))) {\n    return 'Host is required！'\n  }\n  if (/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\\.?/.test(value) && /\\.([a-z]+)$/.test(value)) {\n    return true\n  }\n  if (/^([0-9]|[1-9][0-9]|[1][0-9][0-9]|[2][0-5][0-5])[.]([0-9]|[1-9][0-9]|[1][0-9][0-9]|[2][0-5][0-5])[.]([0-9]|[1-9][0-9]|[1][0-9][0-9]|[2][0-5][0-5])[.]([0-9]|[1-9][0-9]|[1][0-9][0-9]|[2][0-5][0-5])$/.test(value)) {\n    return true\n  }\n  return 'Host is not the correct domain name or ip address'\n}\n\nconst validPort = (value) => {\n  let val = Number(value)\n  if (!_.isInteger(val) || val > 99999 || val < 0) {\n    return 'Port must be an integer from 0-99999'\n  }\n  return true\n}\n\nconst validUser = (value) => {\n  if (_.isEmpty(value.replace(/\\s+/, ''))) {\n    return 'User is required！'\n  }\n  if (!/^[a-zA-Z\\d\\-\\_\\.]+$/.test(value)) {\n    return 'User is malformed'\n  }\n  return true\n}\n\n\n// WEBPACK FOOTER //\n// ./src/create.js","module.exports = require(\"inquirer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"inquirer\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"runscript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"runscript\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"ora\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ora\"\n// module id = 13\n// module chunks = 0"],"sourceRoot":""}